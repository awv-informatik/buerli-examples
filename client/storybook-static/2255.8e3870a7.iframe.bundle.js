"use strict";(self.webpackChunkbuerli_examples_client=self.webpackChunkbuerli_examples_client||[]).push([[2255],{"./node_modules/raw-loader/dist/cjs.js!./src/history/models/ShadowboxWithExpressions_Example.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="import { ApiHistory } from '@buerli.io/headless'\r\nimport arraybuffer from '../../shared/resources/ShadowboxV2.of1'\r\nimport { ParamType } from '../store'\r\n\r\nexport const paramsMap: ParamType = {\r\n  Depth: 20,\r\n  Height: 200,\r\n  Width: 400,\r\n  'Min. Gap': 5,\r\n  'Hole Diameter': 35,\r\n  Columns: 8,\r\n  Rows: 4,\r\n}\r\n\r\nexport const create = async (api: ApiHistory, params: ParamType = paramsMap) => {\r\n  const productId = await api.load(arraybuffer, 'of1')\r\n\r\n  // Set initial values\r\n  const minGap = params['Min. Gap']\r\n  const holeDiameter = params['Hole Diameter']\r\n  let columns = params['Columns']\r\n  let rows = params['Rows']\r\n  const foamDepth = params['Depth']\r\n  const foamHeight = params['Height']\r\n  const foamWidth = params['Width']\r\n\r\n  // Calculate max. columns and rows\r\n  columns =\r\n    foamWidth - columns * holeDiameter >= (columns + 1) * minGap\r\n      ? columns\r\n      : Math.floor((foamWidth - (columns + 1) * minGap) / holeDiameter)\r\n\r\n  rows =\r\n    foamHeight - rows * holeDiameter >= (rows + 1) * minGap\r\n      ? rows\r\n      : Math.floor((foamHeight - (rows + 1) * minGap) / holeDiameter)\r\n\r\n  await api.setExpressions(\r\n    productId[0],\r\n    { name: 'Columns', value: columns },\r\n    { name: 'Rows', value: rows },\r\n    { name: 'HoleDiameter', value: holeDiameter },\r\n    { name: 'FoamDepth', value: foamDepth },\r\n    { name: 'FoamHeight', value: foamHeight },\r\n    { name: 'FoamWidth', value: foamWidth },\r\n  )\r\n  return productId[0]\r\n}\r\n\r\nexport const update = async (api: ApiHistory, productId: number, params: ParamType = paramsMap) => {\r\n  const minGap = params['Min. Gap']\r\n  const holeDiameter = params['Hole Diameter']\r\n  let columns = params['Columns']\r\n  let rows = params['Rows']\r\n  const foamDepth = params['Depth']\r\n  const foamHeight = params['Height']\r\n  const foamWidth = params['Width']\r\n\r\n  // Calculate max. columns and rows\r\n  columns =\r\n    foamWidth - columns * holeDiameter >= (columns + 1) * minGap\r\n      ? columns\r\n      : Math.floor((foamWidth - (columns + 1) * minGap) / holeDiameter)\r\n\r\n  rows =\r\n    foamHeight - rows * holeDiameter >= (rows + 1) * minGap\r\n      ? rows\r\n      : Math.floor((foamHeight - (rows + 1) * minGap) / holeDiameter)\r\n\r\n  api.setExpressions(\r\n    productId,\r\n    { name: 'Columns', value: columns },\r\n    { name: 'Rows', value: rows },\r\n    { name: 'HoleDiameter', value: holeDiameter },\r\n    { name: 'FoamDepth', value: foamDepth },\r\n    { name: 'FoamHeight', value: foamHeight },\r\n    { name: 'FoamWidth', value: foamWidth },\r\n  )\r\n}\r\n\r\nexport default create\r\n"}}]);